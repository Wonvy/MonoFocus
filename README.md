# MonoFocus

<div align="center">

**è·¨å¹³å°å¤šæ˜¾ç¤ºå™¨æŠ¤çœ¼ä¸ä¸“æ³¨å·¥å…·**

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Platform](https://img.shields.io/badge/platform-Windows%20%7C%20macOS%20%7C%20Linux-lightgrey)
![Rust](https://img.shields.io/badge/rust-1.70%2B-orange)
![Tauri](https://img.shields.io/badge/tauri-1.5%2B-blue)

</div>

---

## ğŸ“– ç®€ä»‹

**MonoFocus** æ˜¯ä¸€æ¬¾åŸºäº Rust + Tauri å¼€å‘çš„è·¨å¹³å°å¤šæ˜¾ç¤ºå™¨æŠ¤çœ¼å·¥å…·ã€‚å½“æ‚¨çš„é¼ æ ‡ç§»åŠ¨åˆ°æŸä¸€å°æ˜¾ç¤ºå™¨æ—¶ï¼Œå…¶ä»–æ˜¾ç¤ºå™¨ä¼šè‡ªåŠ¨æ˜¾ç¤ºåŠé€æ˜é»‘è‰²é®ç½©ï¼Œé™ä½è§†è§‰å¹²æ‰°ï¼Œå¸®åŠ©æ‚¨ä¸“æ³¨äºå½“å‰å·¥ä½œåŒºåŸŸï¼ŒåŒæ—¶å‡å°‘å¤šå±ç¯å¢ƒä¸‹çš„çœ¼éƒ¨ç–²åŠ³ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ–¥ï¸ **å¤šæ˜¾ç¤ºå™¨æ™ºèƒ½æ£€æµ‹** - è‡ªåŠ¨è¯†åˆ«æ‰€æœ‰å·²è¿æ¥çš„æ˜¾ç¤ºå™¨
- ğŸ¯ **å®æ—¶è·Ÿéšé¼ æ ‡** - æ™ºèƒ½åˆ¤æ–­å½“å‰æ´»è·ƒæ˜¾ç¤ºå™¨
- ğŸŒ“ **åŠ¨æ€é®ç½©å±‚** - éæ´»è·ƒæ˜¾ç¤ºå™¨è‡ªåŠ¨æ˜¾ç¤ºåŠé€æ˜é®ç½©
- ğŸšï¸ **é€æ˜åº¦å¯è°ƒ** - æ”¯æŒ 0-80% é€æ˜åº¦è‡ªç”±è°ƒèŠ‚
- ğŸ¨ **æ˜¾ç¤ºå™¨å¯è§†åŒ–** - ä»¥çœŸå®æ¯”ä¾‹å±•ç¤ºæ‰€æœ‰æ˜¾ç¤ºå™¨å¸ƒå±€
- ğŸ’¾ **é…ç½®æŒä¹…åŒ–** - è‡ªåŠ¨ä¿å­˜æ‚¨çš„åå¥½è®¾ç½®
- ğŸš€ **è½»é‡é«˜æ•ˆ** - åŸºäº Rust æ„å»ºï¼Œèµ„æºå ç”¨æä½
- ğŸ¯ **ç‚¹å‡»ç©¿é€** - é®ç½©å±‚ä¸å½±å“æ­£å¸¸æ“ä½œ
- ğŸ”” **ç³»ç»Ÿæ‰˜ç›˜** - æœ€å°åŒ–åˆ°æ‰˜ç›˜ï¼Œéšæ—¶å¿«é€Ÿåˆ‡æ¢
- ğŸŒ **è·¨å¹³å°æ”¯æŒ** - Windowsã€macOSã€Linux ä¸€è‡´ä½“éªŒ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

#### ä» Release ä¸‹è½½ï¼ˆæ¨èï¼‰

å‰å¾€ [Releases](https://github.com/yourusername/MonoFocus/releases) é¡µé¢ä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…åŒ…ï¼š

- **Windows**: `MonoFocus_x64_setup.exe`
- **macOS**: `MonoFocus.dmg`
- **Linux**: `MonoFocus_amd64.AppImage` / `MonoFocus_amd64.deb`

#### ä»æºç æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/MonoFocus.git
cd MonoFocus

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run tauri dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run tauri build
```

### ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.15+, ä¸»æµ Linux å‘è¡Œç‰ˆ
- **è¿è¡Œæ—¶**: æ— éœ€é¢å¤–ä¾èµ–ï¼ˆTauri æ‰“åŒ…ä¸ºç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ï¼‰

---

## ğŸ¨ åŠŸèƒ½è¯´æ˜

### 1. æ˜¾ç¤ºå™¨å¸ƒå±€å¯è§†åŒ–

MonoFocus çš„ä¸»ç•Œé¢ä¼šä»¥ç¼©ç•¥å›¾å½¢å¼å±•ç¤ºæ‰€æœ‰æ£€æµ‹åˆ°çš„æ˜¾ç¤ºå™¨ï¼š

- **çœŸå®æ¯”ä¾‹æ¸²æŸ“**ï¼šæ ¹æ®ç‰©ç†å°ºå¯¸æˆ–åˆ†è¾¨ç‡è®¡ç®—ç›¸å¯¹å¤§å°
- **ä½ç½®å…³ç³»è¿˜åŸ**ï¼šä¿æŒç³»ç»Ÿä¸­é…ç½®çš„æ˜¾ç¤ºå™¨æ’åˆ—ï¼ˆå·¦å³ã€ä¸Šä¸‹ï¼‰
- **å½“å‰å±é«˜äº®**ï¼šé¼ æ ‡æ‰€åœ¨æ˜¾ç¤ºå™¨ä¼šä»¥é«˜äº®è¾¹æ¡†æ ‡è¯†
- **æç®€è®¾è®¡**ï¼šæ— æ–‡å­—æ ‡ç­¾ï¼Œçº¯è§†è§‰åŒ–å±•ç¤º

### 2. æ™ºèƒ½é®ç½©

- é¼ æ ‡ç§»åŠ¨åˆ°ä»»ä½•æ˜¾ç¤ºå™¨æ—¶ï¼Œå…¶ä»–å±å¹•è‡ªåŠ¨è¦†ç›–åŠé€æ˜é»‘è‰²é®ç½©
- é®ç½©çª—å£å§‹ç»ˆç½®é¡¶ï¼Œä½†å…è®¸é¼ æ ‡å’Œé”®ç›˜äº‹ä»¶ç©¿é€
- æ”¯æŒå®æ—¶è°ƒæ•´é€æ˜åº¦ï¼ˆ0-80%ï¼‰

### 3. ç³»ç»Ÿæ‰˜ç›˜

å³é”®æ‰˜ç›˜å›¾æ ‡å¯å¿«é€Ÿè®¿é—®ï¼š

- **Enable / Disable Shield** - å¿«é€Ÿå¼€å…³æŠ¤çœ¼æ¨¡å¼
- **Settings** - æ‰“å¼€è®¾ç½®çª—å£
- **Exit** - é€€å‡ºåº”ç”¨

### 4. é…ç½®ç®¡ç†

æ‰€æœ‰è®¾ç½®è‡ªåŠ¨ä¿å­˜ï¼ŒåŒ…æ‹¬ï¼š
- é®ç½©é€æ˜åº¦
- æŠ¤çœ¼æ¨¡å¼å¯ç”¨çŠ¶æ€
- å¼€æœºè‡ªå¯åŠ¨é€‰é¡¹ï¼ˆå¯é€‰ï¼‰

---

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

- **åç«¯**: Rust 1.70+
- **æ¡†æ¶**: Tauri 1.5+
- **å‰ç«¯**: HTML5 / CSS3 / JavaScriptï¼ˆå¯æ‰©å±• Vue/Reactï¼‰
- **é…ç½®å­˜å‚¨**: tauri-plugin-store / JSON

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Tauri Frontend                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ˜¾ç¤ºå™¨ç¼©ç•¥å›¾  â”‚  â”‚ é€æ˜åº¦æ»‘æ¡   â”‚  â”‚ æ¨¡å¼å¼€å…³     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†• IPC (invoke)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Rust Backend                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ monitor.rs   â”‚  â”‚ mouse_       â”‚  â”‚ overlay.rs   â”‚ â”‚
â”‚  â”‚ æ˜¾ç¤ºå™¨æ£€æµ‹   â”‚  â”‚ watcher.rs   â”‚  â”‚ é®ç½©çª—å£ç®¡ç† â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ config.rs    â”‚  â”‚ tray.rs      â”‚                   â”‚
â”‚  â”‚ é…ç½®ç®¡ç†     â”‚  â”‚ æ‰˜ç›˜å›¾æ ‡     â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¨¡å—

#### 1. `monitor.rs` - æ˜¾ç¤ºå™¨æ£€æµ‹

```rust
pub struct MonitorInfo {
    pub id: String,              // æ˜¾ç¤ºå™¨å”¯ä¸€æ ‡è¯†
    pub x: i32,                  // è™šæ‹Ÿæ¡Œé¢ X åæ ‡
    pub y: i32,                  // è™šæ‹Ÿæ¡Œé¢ Y åæ ‡
    pub width: i32,              // é€»è¾‘å®½åº¦ï¼ˆåƒç´ ï¼‰
    pub height: i32,             // é€»è¾‘é«˜åº¦ï¼ˆåƒç´ ï¼‰
    pub physical_width_mm: Option<f32>,  // ç‰©ç†å®½åº¦ï¼ˆæ¯«ç±³ï¼‰
    pub physical_height_mm: Option<f32>, // ç‰©ç†é«˜åº¦ï¼ˆæ¯«ç±³ï¼‰
    pub scale_factor: f32,       // HiDPI ç¼©æ”¾æ¯”ä¾‹
}
```

**åŠŸèƒ½**ï¼š
- è·¨å¹³å°è·å–æ‰€æœ‰æ˜¾ç¤ºå™¨ä¿¡æ¯
- æå–ç‰©ç†å°ºå¯¸ï¼ˆç”¨äºçœŸå®æ¯”ä¾‹æ¸²æŸ“ï¼‰
- ç›‘å¬æ˜¾ç¤ºå™¨è¿æ¥/æ–­å¼€äº‹ä»¶

**å¹³å°å®ç°**ï¼š
- **Windows**: `EnumDisplayMonitors` + `GetMonitorInfo`
- **macOS**: `CGDisplayBounds` + `CGDisplayScreenSize`
- **Linux**: X11 `XRRGetMonitors` / Wayland `wl_output`

#### 2. `mouse_watcher.rs` - é¼ æ ‡ç›‘å¬

**åŠŸèƒ½**ï¼š
- å®æ—¶è·å–é¼ æ ‡å…¨å±€åæ ‡
- åˆ¤æ–­é¼ æ ‡æ‰€åœ¨çš„æ˜¾ç¤ºå™¨
- è§¦å‘é®ç½©å±‚æ›´æ–°äº‹ä»¶

**å¹³å°å®ç°**ï¼š
- **Windows**: `GetCursorPos` + `MonitorFromPoint`
- **macOS**: `CGEvent::location` + åæ ‡åŒ¹é…
- **Linux**: X11 `XQueryPointer` / Wayland äº‹ä»¶ç›‘å¬

#### 3. `overlay.rs` - é®ç½©çª—å£

**åŠŸèƒ½**ï¼š
- ä¸ºæ¯ä¸ªéæ´»è·ƒæ˜¾ç¤ºå™¨åˆ›å»ºå…¨å±é€æ˜çª—å£
- è®¾ç½®çª—å£å±æ€§ï¼šæ— è¾¹æ¡†ã€é€æ˜ã€ç‚¹å‡»ç©¿é€ã€ç½®é¡¶
- åŠ¨æ€è°ƒæ•´é€æ˜åº¦å’Œæ˜¾ç¤º/éšè—çŠ¶æ€

**å…³é”®æŠ€æœ¯**ï¼š
- **Windows**: 
  - `WS_EX_LAYERED` + `WS_EX_TRANSPARENT` å®ç°é€æ˜ç©¿é€
  - `SetLayeredWindowAttributes` è®¾ç½®é€æ˜åº¦
- **macOS**:
  - `NSWindowStyleMaskBorderless` + `ignoresMouseEvents`
  - `alphaValue` æ§åˆ¶é€æ˜åº¦
- **Linux**:
  - X11: `_NET_WM_WINDOW_TYPE_DOCK` + `XShapeCombineRectangles`
  - Wayland: Layer Shell Protocol

#### 4. `monitor_layout_mapper.rs` - å¸ƒå±€è®¡ç®—

**åŠŸèƒ½**ï¼š
- å°†çœŸå®æ˜¾ç¤ºå™¨åæ ‡æ˜ å°„åˆ° UI å®¹å™¨
- ä¿æŒç›¸å¯¹ä½ç½®å…³ç³»å’Œå®½é«˜æ¯”ä¾‹
- æä¾›æ ‡å‡†åŒ–å¸ƒå±€æ•°æ®ç»™å‰ç«¯

**ç®—æ³•ç¤ºä¾‹**ï¼š

```rust
pub fn normalize_layout(monitors: &[MonitorInfo], container_width: f32, container_height: f32) -> Vec<UIRect> {
    // 1. è®¡ç®—åŒ…ç»œç›’
    let min_x = monitors.iter().map(|m| m.x).min().unwrap();
    let max_x = monitors.iter().map(|m| m.x + m.width).max().unwrap();
    let min_y = monitors.iter().map(|m| m.y).min().unwrap();
    let max_y = monitors.iter().map(|m| m.y + m.height).max().unwrap();
    
    let total_width = (max_x - min_x) as f32;
    let total_height = (max_y - min_y) as f32;
    
    // 2. è®¡ç®—ç¼©æ”¾æ¯”ä¾‹ï¼ˆä¿æŒçºµæ¨ªæ¯”ï¼‰
    let margin = 20.0;
    let scale = ((container_width - 2.0 * margin) / total_width)
        .min((container_height - 2.0 * margin) / total_height);
    
    // 3. æ˜ å°„æ¯ä¸ªæ˜¾ç¤ºå™¨
    monitors.iter().map(|m| {
        UIRect {
            x: (m.x - min_x) as f32 * scale + margin,
            y: (m.y - min_y) as f32 * scale + margin,
            width: m.width as f32 * scale,
            height: m.height as f32 * scale,
            id: m.id.clone(),
        }
    }).collect()
}
```

#### 5. `config.rs` - é…ç½®ç®¡ç†

**å­˜å‚¨ä½ç½®**ï¼š
- Windows: `%APPDATA%\MonoFocus\config.json`
- macOS: `~/Library/Application Support/MonoFocus/config.json`
- Linux: `~/.config/MonoFocus/config.json`

**é…ç½®ç»“æ„**ï¼š

```json
{
  "opacity": 0.6,
  "enabled": true,
  "auto_start": false,
  "theme": "auto"
}
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

- **å¤šå±å¼€å‘è€…** - ä¸“æ³¨ä¸»æ˜¾ç¤ºå™¨ä»£ç ï¼Œå‡å°‘å…¶ä»–å±å¹•å¹²æ‰°
- **è®¾è®¡å¸ˆ** - åœ¨è®¾è®¡æ—¶éšè—å‚è€ƒå±å¹•çš„è§†è§‰å™ªéŸ³
- **äº¤æ˜“å‘˜** - èšç„¦å½“å‰ç›‘æ§çš„æ•°æ®é¢æ¿
- **å†…å®¹åˆ›ä½œè€…** - é™ä½å¤šå±ç¯å¢ƒçš„è§†è§‰ç–²åŠ³
- **é•¿æ—¶é—´ç”µè„‘ç”¨æˆ·** - æŠ¤çœ¼æ¨¡å¼å‡è½»çœ¼éƒ¨å‹åŠ›

---

## ğŸ”§ å¼€å‘æŒ‡å—

è¯¦ç»†å¼€å‘æ–‡æ¡£è¯·å‚é˜…ï¼š[DEVELOPMENT.md](./DEVELOPMENT.md)

### é¡¹ç›®ç»“æ„

```
MonoFocus/
â”œâ”€â”€ src-tauri/              # Rust åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs         # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ monitor.rs      # æ˜¾ç¤ºå™¨æ£€æµ‹
â”‚   â”‚   â”œâ”€â”€ mouse_watcher.rs
â”‚   â”‚   â”œâ”€â”€ overlay.rs      # é®ç½©çª—å£
â”‚   â”‚   â”œâ”€â”€ config.rs       # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ tray.rs         # ç³»ç»Ÿæ‰˜ç›˜
â”‚   â””â”€â”€ Cargo.toml
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ styles.css
â”‚   â”œâ”€â”€ main.js
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ MonitorLayout.js
â”‚       â””â”€â”€ OpacitySlider.js
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ icons/                  # åº”ç”¨å›¾æ ‡
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
npm run tauri dev

# ä»£ç æ ¼å¼åŒ–
cargo fmt --manifest-path=src-tauri/Cargo.toml

# è¿è¡Œæµ‹è¯•
cargo test --manifest-path=src-tauri/Cargo.toml

# æ„å»º
npm run tauri build
```

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

- [Tauri](https://tauri.app/) - è·¨å¹³å°åº”ç”¨æ¡†æ¶
- [Rust](https://www.rust-lang.org/) - ç³»ç»Ÿç¼–ç¨‹è¯­è¨€
- æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·

---

## ğŸ“ è”ç³»æ–¹å¼

- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/yourusername/MonoFocus/issues)
- **è®¨è®ºäº¤æµ**: [GitHub Discussions](https://github.com/yourusername/MonoFocus/discussions)

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ Starï¼**

Made with â¤ï¸ by MonoFocus Team

</div>

